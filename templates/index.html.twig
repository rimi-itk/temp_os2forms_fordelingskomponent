<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title|default('Fordelingskomponent-test') }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>

{%- macro webservice_link(route, context) -%}
  {% set url = url(route, options: {path_processing: false}) %}
  {# Convert URL to string #}
  {% set url = render_var(url) ~ '' %}
  {% if context.basic_auth|default(null) %}
    {% set url = url|replace({'://': '://' ~ (context.basic_auth|join(':')) ~ '@'}) %}
  {% endif %}
  <a href="{{ url }}">{{ url }}</a>
{%- endmacro -%}

{%- macro kom_godt_i_gang_link(additional_text, options = {}) -%}
    {% set url = 'https://docs.kombit.dk/latest/6376001a' %}
    {% if options.fragment_query is defined %}
        {% set url = url ~ '#' ~ options.fragment_query|url_encode %}
    {% endif %}
    {% set text = ('Kom godt i gang - Fordelingskomponenten' ~ additional_text|default(''))|trim %}
    <a href="{{ url }}">{{ text }}</a>
{%- endmacro -%}
<div class="container-fluid">
    <h1>Fordelingskomponent</h1>

    <p>
        {{ _self.webservice_link('temp_os2forms_fordelingskomponent.sf2900_2_4_FordelingskvitteringModtag', _context) }} implementerer <strong>på sigt</strong> eksemplet fra {{ _self.kom_godt_i_gang_link(', side 15', {fragment_query: {page: 15}}) }}.
    </p>

  <p>
    {{ _self.webservice_link('temp_os2forms_fordelingskomponent.sf2900_2_4_FordelingsobjektModtag', _context) }} implementerer <strong>på sigt</strong> eksemplet fra {{ _self.kom_godt_i_gang_link(', side 10–11', {fragment_query: {page: 10}}) }}.
  </p>

  <hr/>

    <h2>Certifikat</h2>

    <p>Dette sites certifikat (som skal tilføjes et eller andet sted i “Administrationen”):
        {% for _format in ['pem', 'txt', 'json'] %}
        <a href="{{ path('temp_os2forms_fordelingskomponent.temp_os2forms_fordelingskomponent_certificate', {_format: _format}) }}">{{ _format }}</a>
        {% endfor %}
    </p>

  {% if sftp %}
    <h2>SFTP</h2>

    <dl>
      <dt>Brugernavn</dt>
      <dd>{{ sftp.username }}</dd>

      <dt>Offentlig nøgle</dt>
      <dd><a href="{{ sftp.public_key_url }}">{{ sftp.public_key_name }}</a></dd>
    </dl>
  {% endif %}
</div>
</body>
</html>
